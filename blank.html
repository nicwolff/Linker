<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<style type="text/css" media="screen">
	body { font-family: Verdana; font-size: 12px; }
	h2 { font-size: 14px; }
	#links {
		padding: 6px;
		border-width: 1px;
		border-style: inset;
		background-color: #eee;
		margin-bottom: 1em;
	}
	#links div { margin: 6px; white-space: pre; }
	span { width: 150px; }
	#check { display: none; }
</style>

<title>Links</title>
<div id="links"></div>
<div id="check">
	<input type="checkbox" id="edit">
	<label for="edit">Editable</label>
</div>

<div>
	<h2>How to use this</h2>
	<p>(You may have to put these HTML files in the same directory as the images.)</p>
	<p>First, select an image file with the file upload control in the other window.</p>
	<p>Then you can define link areas, clicking first on the top left corner and then the bottom right corner. Option-click a link area to remove it.</p>
	<p>Click the "Editable" checkbox above to edit the page-numbers (replacing some with URLs), then uncheck it again so you can copy the text and paste it into the page's plist.</p>
	<p>Finally you can click the "Next" button to load the next numbered image.</p>
</div>
<script type="text/javascript" charset="utf-8">
$('#edit').change( function () {
	$('#links div').prop( 'contenteditable', $('#edit').is(':checked') );
} );
$('#links').on( 'mouseenter', 'div', function (e) {
	$(window.opener.document.getElementById(this.id)).css( 'outline-width', '5px' );
} ).on( 'mouseleave', 'div', function (e) {
	$(window.opener.document.getElementById(this.id)).css( 'outline-width', '1px' );
} );
</script>